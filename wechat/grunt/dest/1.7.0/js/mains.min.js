function debugAlert(a){isDebug&&alert(a)}function isEmail(a){var b=RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(a);return b?!0:!1}function isPassword(a){var b=RegExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,20}$/).test(a);return b?!0:!1}function isContainStr(a,b){return""!=b&&void 0!=b&&a.toLowerCase().indexOf(b.toLowerCase())>-1?!0:!1}function isPhone(a){return a.match("^[0-9]{2}-[0-9]{8}$")}function isInvalidMPhone(a){return a.match("^[0-9]{2}-[0-9]{9}$")}function isInteger(a){var b=RegExp(/^[0-9]+$/);return b.test(a)}function handleEnter(a,b){var c=b.keyCode?b.keyCode:b.which?b.which:b.charCode;if(13==c){var d;for(d=0;d<a.form.elements.length&&a!=a.form.elements[d];d++);return d=(d+1)%a.form.elements.length,a.form.elements[d].focus(),!1}return!0}function getWeekDay(a){var b=1e3*(60*a.getHours()*60+60*a.getMinutes()+a.getSeconds()),c=a.getTime()-864e5*a.getDay()-b;return c}function getWeeHoursDay(a){var b=1e3*(60*a.getHours()*60+60*a.getMinutes()+a.getSeconds());return a.getTime()-b}function getWindowHeight(){var a=0;return window.innerHeight?a=window.innerHeight:document.body&&document.body.clientHeight&&(a=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(a=document.documentElement.clientHeight),a}function getObjAttributeNames(a){var b=new Array;for(key in a)b.push(key);return b}function getObjAttributeNameByValue(obj,value){for(key in obj)if(eval("obj."+key)==value)return key;return null}function getEnumAttributes(obj){var methods=new Array;for(key in obj){var element=new Object;element.name=key,element.value=eval("obj."+key),methods.push(element)}return methods}function getDay(a){var b="";switch(a){case 2:b="Tuesday";break;case 3:b="Wednesday";break;case 4:b="Thursday";break;case 5:b="Friday";break;case 6:b="Saturday";break;case 1:b="Monday"}return b}function validInteger(a){return null!=a&&(a=a.toString(),a=a.replace(/[^\d]/g,"")),a}function validDecimal(a){return null!=a&&(a=a.toString(),a=a.replace(/[^\d.]/g,""),a=a.replace(/^\./g,""),a=a.replace(/\.{2,}/g,"."),a=a.replace(".","$#$").replace(/\./g,"").replace("$#$","."),a=a.replace(/^(-?\\d+)(\\.\\d+)?$/,"")),a}function isWeixin(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)?!0:!1}function isWeibo(){var a=navigator.userAgent.toLowerCase();return"microblog"==a.match(/MicroBlog/i)?!0:!1}function getMobileType(){var a=navigator.userAgent;return a.indexOf("Android")>-1||a.indexOf("Linux")>-1?MobileTypes.Android:a.indexOf("iPhone")>-1?MobileTypes.iPhone:a.indexOf("iPad")>-1?MobileTypes.iPad:a.indexOf("Mac")>-1?MobileTypes.iPhone:MobileTypes.None}function encodeUTF8(a){for(var b="",c="",d=0,e=a.length;e>d;d++)b=a.charCodeAt(d).toString(16),c+="\\u"+new Array(5-b.length).join("0")+b;return c}function decodeUTF8(a){return a.replace(/(\\u)(\w{4}|\w{2})/gi,function(a,b,c){return String.fromCharCode(parseInt(c,16))})}function checkNumber(a,b){if(b){var c=!1;a.value.indexOf(".")>-1&&a.value.split(".").length>1&&(c=!0),(event.keyCode<48&&c||event.keyCode>57)&&(event.returnValue=!1),event.keyCode>=35&&event.keyCode<=37&&(event.returnValue=!1),event.keyCode>=38&&event.keyCode<=43&&(event.returnValue=!1),45==event.keyCode&&(event.returnValue=!1),44==event.keyCode&&(event.returnValue=!1),47==event.keyCode&&(event.returnValue=!1),a.value.split(".").length>1&&a.value.split(".")[1].length>2&&(event.returnValue=!1)}else 46!==event.keyCode&&8!==event.keyCode&&(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)&&(event.returnValue=!1)}function checkNumberTwo(a,b){if(b){var c=!1;a.value.indexOf(".")>-1&&a.value.split(".").length>1&&(c=!0),(event.keyCode<48&&c||event.keyCode>57)&&(event.returnValue=!1),event.keyCode>=35&&event.keyCode<=37&&(event.returnValue=!1),event.keyCode>=38&&event.keyCode<=43&&(event.returnValue=!1),45==event.keyCode&&(event.returnValue=!1),44==event.keyCode&&(event.returnValue=!1),47==event.keyCode&&(event.returnValue=!1),a.value.split(".").length>1&&a.value.split(".")[1].length>2&&(event.returnValue=!1)}else(0==a.value.length||parseInt(a.value)<=1)&&(a.value=1),countTotal(a)}function reduceNum(a){var b=parseInt($(a).next().val());$(a).next().val(1>=b?1:b-1),countTotal($(a).next()[0])}function addNum(a){var b=parseInt($(a).prev().val());$(a).prev().val(b+1),countTotal($(a).prev()[0])}function countTotal(a){var b=parseFloat(a.value)*parseFloat($(a).prev().prev().val());$(".promotePriceNewTotal").html("￥"+b.toFixed(2))}function setDocumentTitle(a){var a=a||$(".navbar-absolute-top>.navbar-brand span").text();$(document).attr("title",a)}function getToken(){if(localStorage&&localStorage.getItem(easybuy.Storage.Token)){var a=JSON.parse(localStorage.getItem(easybuy.Storage.Token)),b=(new Date).getTime();if(a&&a.timestamp&&a.version){var c=b-a.timestamp,d=6048e5;c>0&&d>c&&easybuy.version==a.version?a=a:(localStorage.removeItem(easybuy.Storage.Token),a=null)}else localStorage.removeItem(easybuy.Storage.Token),a=null;return a}return null}function setToken(a,b){if(localStorage)try{return void(a?(a.timestamp=(new Date).getTime(),a.version=easybuy.version,b&&b.openid&&(a.openid=b.openid,a.headimgurl=b.headimgurl),localStorage.setItem(easybuy.Storage.Token,JSON.stringify(a))):localStorage.removeItem(easybuy.Storage.Token))}catch(c){localStorage.removeItem(easybuy.Storage.Token),alertWarning("你可能开启了浏览器的无痕浏览模式，请关闭无痕浏览模式")}}function getRechargeRoute(){if(localStorage&&localStorage.getItem(easybuy.Storage.RechargeRoute)){var a=JSON.parse(localStorage.getItem(easybuy.Storage.RechargeRoute)),b=(new Date).getTime();if(a&&a.timestamp){var c=b-a.timestamp,d=36e5;c>0&&d>c?a=a:(localStorage.removeItem(easybuy.Storage.RechargeRoute),a=null)}else localStorage.removeItem(easybuy.Storage.RechargeRoute),a=null;return a}return null}function setRechargeRoute(a){if(localStorage)try{return void(a?(a.timestamp=(new Date).getTime(),localStorage.setItem(easybuy.Storage.RechargeRoute,JSON.stringify(a))):localStorage.removeItem(easybuy.Storage.RechargeRoute))}catch(b){localStorage.removeItem(easybuy.Storage.RechargeRoute),alertWarning("你可能开启了浏览器的无痕浏览模式，请关闭无痕浏览模式")}}function removeToken(){if(localStorage)try{return void localStorage.removeItem(easybuy.Storage.Token)}catch(a){localStorage.removeItem(easybuy.Storage.Token)}}function getOrder(){if(localStorage&&localStorage.getItem(easybuy.Storage.Order)){var a=JSON.parse(localStorage.getItem(easybuy.Storage.Order));return a}return null}function setOrder(a){if(localStorage)try{return void(a?localStorage.setItem(easybuy.Storage.Order,JSON.stringify(a)):localStorage.removeItem(easybuy.Storage.Order))}catch(b){localStorage.removeItem(easybuy.Storage.Order),alertWarning("你可能开启了浏览器的无痕浏览模式，请关闭无痕浏览模式")}}function removeOrder(){if(localStorage)try{return void localStorage.removeItem(easybuy.Storage.Order)}catch(a){localStorage.removeItem(easybuy.Storage.Order)}}function getCleaner(){if(localStorage&&localStorage.getItem(easybuy.Storage.Cleaner)){var a=JSON.parse(localStorage.getItem(easybuy.Storage.Cleaner));return a}return null}function setCleaner(a){if(localStorage)try{return void(a?localStorage.setItem(easybuy.Storage.Cleaner,JSON.stringify(a)):localStorage.removeItem(easybuy.Storage.Cleaner))}catch(b){localStorage.removeItem(easybuy.Storage.Cleaner),alertWarning("你可能开启了浏览器的无痕浏览模式，请关闭无痕浏览模式")}}function removeCleaner(){if(localStorage)try{return void localStorage.removeItem(easybuy.Storage.Cleaner)}catch(a){localStorage.removeItem(easybuy.Storage.Cleaner)}}function getCar(){if(localStorage&&localStorage.getItem(easybuy.Storage.Car)){var a=JSON.parse(localStorage.getItem(easybuy.Storage.Car));return a}return null}function setCar(a){if(localStorage)try{return void(a?localStorage.setItem(easybuy.Storage.Car,JSON.stringify(a)):localStorage.removeItem(easybuy.Storage.Car))}catch(b){localStorage.removeItem(easybuy.Storage.Car),alertWarning("你可能开启了浏览器的无痕浏览模式，请关闭无痕浏览模式")}}function removeCar(){if(localStorage)try{return void localStorage.removeItem(easybuy.Storage.Car)}catch(a){localStorage.removeItem(easybuy.Storage.Car)}}function getLocation(a){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){a(b,!0)},function(b){a(b,!1)}):alert("Geolocation is not supported by this browser.")}function getQueryString(){var a=location.search.match(new RegExp("[?&][^?&]+=[^?&]+","g"));if(null==a)return"";for(var b=0;b<a.length;b++)a[b]=a[b].substring(1);return a}function getQueryStringByName(a){var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)","i"));return null==b||b.length<1?"":b[1]}function getQueryStringByIndex(a){if(null==a)return"";var b=getQueryString();if(a>=b.length)return"";var c=b[a],d=c.indexOf("=")+1;return c=c.substring(d)}function openDialog(a,b,c,d,e){zoom=1;var f=$("<div class='dialog'></div>"),g=$("<div class='mask'></div>"),h=$('<img style="display:none;" class="btn-close" src="images/close.png" />');if(g.appendTo("body"),f.appendTo("body"),h.appendTo("body"),h.unbind("click").bind("click",function(){closeDialog()}),a)if(d==DialogType.Image){g.addClass("deeper");var i=$('<div class="img-large"><img src="'+a+'" /></div>');i.appendTo(f),g.unbind().bind("click",function(){closeDialog()}),i.unbind().bind("pinchopen",function(){zoom++,zoomImage(g,i)}),i.bind("pinchclose",function(){zoom--,zoomImage(g,i)}),i.bind("click",function(){3==zoom?closeDialog():(zoom=3,zoomImage(g,i))})}else if(d==DialogType.Success){var j=$("<div class='dialog-success'></div>");j.appendTo(f),j.append($('<div class="cart-success"></div>')),j.append($("<span>"+a+"</span>"))}else if(d==DialogType.Prompt){var j=$("<div class='dialog-body'></div>");j.appendTo(f);var k=/html/i;if(1==arguments.length&&k.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+b);else{if(b&&""!=b){var l=$("<h5></h5>");l.appendTo(j),l.text(b)}var m=$("<p></p>");if(m.appendTo(j),m.html(a),c&&c.length>0){j.addClass("dialog-confirm");var n=$("<div class='dialog_footer justified'></div>");n.appendTo(j);for(var o=0;o<c.length;o++){var p=$("<div class='btn' promo='button"+o+"'></div>");p.append(c[o]),p.appendTo(n)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){var a=$(this).attr("promo").replace("button","");if(e){for(var b=$(".dialog .dialog-body p input"),c=[],d=0;d<b.length;d++){var f=$(b[d]).val();c.push(f)}e("1"==a,c)}$(".mask,.dialog").remove()})}else if(d==DialogType.Pay){var j=$("<div class='dialog-body'></div>"),q=easybuy.PaymentMethods.AlipayWeb;if(j.appendTo(f),b&&""!=b){var l=$("<h5></h5>");l.appendTo(j),l.text(b)}if(j.append($("#pay-area").html()),c&&c.length>0){j.addClass("dialog-confirm");var n=$("<div class='dialog_footer justified'></div>");n.appendTo(j);for(var o=0;o<c.length;o++){var p=$("<div class='btn' promo='button"+o+"'></div>");p.append(c[o]),p.appendTo(n)}}$(".dialog-body .list-group .list-group-item .check-area .radio").bind("click",function(){$(".dialog-body .list-group .list-group-item .check-area .radio").removeClass("checked"),$(this).addClass("checked"),q=parseInt($(this).attr("value"))}),$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var a=$(this).attr("promo").replace("button","");e&&e("1"==a,q)})}else if(d==DialogType.Load){var j=$("<div class='dialog-body'></div>");j.appendTo(f);var k=/html/i;if(1==arguments.length&&k.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+b);else{if(b&&""!=b){var l=$("<h5></h5>");l.appendTo(j),l.text(b)}var m=$("<p style='height:3em'></p>");if(m.appendTo(j),m.html('<i class="fa fa-spinner fa-spin loading-spinner"></i>'),c&&c.length>0){j.addClass("dialog-confirm");var n=$("<div class='dialog_footer justified'></div>");n.appendTo(j);for(var o=0;o<c.length;o++){var p=$("<div class='btn' promo='button"+o+"'></div>");p.append(c[o]),p.appendTo(n)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var a=$(this).attr("promo").replace("button","");e&&e("1"==a)})}else{var j=$("<div class='dialog-body'></div>");j.appendTo(f);var k=/html/i;if(1==arguments.length&&k.test(arguments[0]))$(".dialog").addClass("html_text"),$(".dialog").load("views/"+b);else{if(b&&""!=b){var l=$("<h5></h5>");l.appendTo(j),l.text(b)}var m=$("<p></p>");if(m.appendTo(j),m.text(a),c&&c.length>0){j.addClass("dialog-confirm");var n=$("<div class='dialog_footer justified'></div>");n.appendTo(j);for(var o=0;o<c.length;o++){var p=$("<div class='btn' promo='button"+o+"'></div>");p.append(c[o]),p.appendTo(n)}}}$(".dialog .btn").length>0&&$(".dialog .btn").click(function(){$(".mask,.dialog").remove();var a=$(this).attr("promo").replace("button","");e&&e("1"==a)})}}function zoomImage(a,b){1>zoom&&(zoom=1),zoom>5&&(zoom=5),zoom>1?b.addClass("larger"):b.removeClass("larger"),a.css("width",100*zoom+"%"),b.css("width",100*zoom+"%")}function alertWarning(a){openDialog(a),dialogTimeOutId=setTimeout("closeDialog()",2e3)}function alertExt(a,b){openDialog(a);var c=setTimeout(function(){b&&(b(),clearTimeout(c))},1500)}function alertLoad(){openDialog(!0,null,null,DialogType.Load)}function alertSuccess(a){openDialog(a,null,null,DialogType.Success),dialogTimeOutId=setTimeout("closeDialog()",1500)}function openPrompt(a,b,c,d){openDialog(a,b,c,DialogType.Prompt,d)}function closeDialog(){$(".mask,.dialog,.btn-close").remove(),dialogTimeOutId&&clearTimeout(dialogTimeOutId),dialogTimeOutId=null}function showLargeImage(a){openDialog(a,null,null,DialogType.Image)}function showImageLarger(a){openDialog(a.src,null,null,DialogType.Image)}var easybuy={};easybuy.version="6.30.1340",easybuy.Storage={OrderProducts:"Order.OrderProducts",Address:"Global.Address",AddressTemp:"Address.Temp",MobileInquiry:"Inquiry.Mobile",UserInfo:"Global.UserInfo",UserInfoService:"Global.UserInfoService",Car:"Global.Car",Cart:"Global.Cart",DownloadAppClose:"Global.DownloadAppClose",oAuth:"Global.oAuth",Order:"Global.Order",Token:"Global.Token",WxSdkToken:"Global.WxSdkToken",Find:"Global.Find",RechargeRoute:"Global.RechargeRoute",Cleaner:"Global.Cleaner"};var statusCode={Success:0,error:-1},statusMsg={Success:"OK",error:"failed"},isDebug=!1,defindeBackBtn=[];defindeBackBtn["/car"]="/myCars",defindeBackBtn["/myCars"]="/order",defindeBackBtn["/order"]="/teacher",defindeBackBtn["/teacher"]="/teachers",Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var MobileTypes={Android:"Android",iPhone:"iPhone",iPad:"iPad",None:""};Date.prototype.diff=function(a){return(this.getTime()-a.getTime())/864e5};var serviceUrl="http://www.xiaoniubang.com/api",javaServiceUrl=location.host.indexOf("localhost")>-1||location.host.indexOf(":")>-1?"http://www.xiaoniubang.com/api":"http://www.xiaoniubang.com/api",publishVersion="1.3.4",CAR_WASH_CONST={appId:"wx6e20ff10bae65ce5",secret:"754d73922d673f37631e7f5d3c2f40b7",callbackUrl:"http://m.xiaoniubang.com/oauth2.php"},webchatOauth=function(a,b){var c=CAR_WASH_CONST.appId,d=CAR_WASH_CONST.callbackUrl;return"userinfo"==b?"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+c+"&redirect_uri="+d+"&response_type=code&scope=snsapi_userinfo&state="+a+"#wechat_redirect":"https://open.weixin.qq.com/connect/oauth2/authorize?appid="+c+"&redirect_uri="+d+"&response_type=code&scope=snsapi_base&state="+a+"#wechat_redirect"},getWapAccessTokenUrl=function(a){var b=CAR_WASH_CONST.appId,c=CAR_WASH_CONST.secret;return"https://api.weixin.qq.com/sns/oauth2/access_token?appid="+b+"&secret="+c+"&code="+a+"&grant_type=authorization_code"},getWechatUserUrl=function(a,b){return"https://api.weixin.qq.com/sns/userinfo?access_token="+b+"&openid="+a+"&lang=zh_CN"},dialogTimeOutId=null,zoom=1,DialogType={Default:0,Image:1,Success:2,Prompt:3,Pay:4,Load:5};window.showLoading=function(){alertLoad()},window.hideLoading=function(){closeDialog()};