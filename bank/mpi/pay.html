<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="GENERATOR" content="IBM WebSphere Studio">

<title>商户支付-支付网关选择支付类型</title>
<script type="text/javascript">
/********************JS扩展 *************************/
Date.prototype.getDateString = function(Seperate) {
    var Year  = this.getFullYear().toString(10);
    var Month = (this.getMonth() + 1).toString(10);
    var Day   = this.getDate().toString(10);
    if (Month.length == 1)
        Month = "0" + Month;
    if (Day.length == 1)
        Day = "0" + Day;
    
    return Year + Seperate + Month + Seperate + Day;
}

Date.prototype.getTimeString = function(Seperate) {
    var Hour   = this.getHours().toString(10);
    var Minute = this.getMinutes().toString(10);
    var Second = this.getSeconds().toString(10);
    if (Hour.length == 1)
        Hour = "0" + Hour;
    if (Minute.length == 1)
        Minute = "0" + Minute;
    if (Second.length == 1)
        Second = "0" + Second;
    
    return Hour + Seperate + Minute + Seperate + Second;
}

Date.prototype.getDateTimeString = function(DaySeperate, TimeSeperate) {
    var Divide = "";
    if (DaySeperate.length != 0)
        Divide = " ";
    return this.getDateString(DaySeperate) + Divide + this.getTimeString(TimeSeperate);
}

/********************自动生成流水hao *************************/
function genOrderNumber() {
	var order = new Date().getDateTimeString("","");		 
	document.getElementById("orderNumber").value="1000" + order;
	document.getElementById("orderTime").value = order;
	document.getElementById("settleDate").value = order.substring(0,8);
}

function onblurPress_onblurPress(vobj){         
    var isMoney14="^(([1-9][0-9]{0,11})|[0-9])((\\.(\\d{1,2}))|)$";		
	 var vObj = vobj.value;		 		
	 if(vObj =='')
	 	return '';
    var reg = new RegExp(isMoney14);     
    var arr = reg.exec(vObj);		     
    if(arr == null)  
    {     
       vobj.focus();           
	    alert("输入金额错误! 正确如：100.00");
	    return false;
	}			
}	

function checkValid(){
  	var merId  =  document.getElementById("merId").value;
	var orderNumber  =  document.getElementById("orderNumber").value;
	var orderAmount  =  document.getElementById("orderAmount").value;
	var transType  =  document.getElementById("transType").value;
	var orderTime  =  document.getElementById("orderTime").value;
	if(merId==""){ alert("请输入商户号"); return false;}
	if(orderNumber==""){ alert("请输入订单号"); return false;}	
	if(transType=="35"&&orderTime==""){
		alert("请输入日期"); 
		return false;
	} 
	if(transType!="35"&&orderAmount==""){
		alert("请输入金额"); 
		return false;
	}
	return onblurPress_onblurPress(document.getElementById("orderAmount"));
}

</script>
</head>
<body onLoad="genOrderNumber();">
<form method="post" id="frmPay" name="frmPay" action="proccess/TransProcess.php" onsubmit="return checkValid()">

<table id="tbCartItemsNormal" border="0" width="98%" cellspacing="1" cellpadding="1" style="font-size: 11pt" align="center">
	<tbody>
			<tr>
			<td colspan="2" align="center">商户支付模拟页面(功能-<font color="red">包含选择消费、消费撤销、退货、支付交易状态查询、对账文件下载，（注意：撤销：是针对交易未完成商户清算订单，退货：是针对交易已完成商户清算订单）</font>)
			<hr width="100%">&nbsp;</td>
		</tr>
		<tr>
			<td align="right" width="50%">商户号:</td>
			<td width="50%">
			 <input type="text" name="merId" id="merId" value="585320548160001">
			</td>
		</tr>
		<tr>
			<td align="right" width="40%">二级商户号:</td>
			<td width="60%">
				<input type="text" name="secMerId" id="secMerId" value="">
			</td>
		</tr>
		<TR>
			<TD align="right">交易订单号/交易流水号(交易或查询):</TD>
			<TD><input type="text" name="orderNumber" id="orderNumber" maxlength="19" value=""
				id="orderNumber" /><font color="red">订单号：必须输入18位数字，交易流水号(19位)</font></TD>
		</TR>
		<tr bgcolor="#FFFFFF">
			<td align="right">金额（元）:</td>
			<td><input type="text" name="orderAmount" id="orderAmount" maxlength="12" ><font color="red">必须输入1-12位数字或者小数点</font></td>
		</tr>		
		<tr>
			<td align="right">外部订单时间(交易或查询):</td>
			<td><input type="text" name="orderTime" id="orderTime" value="" maxlength="14" ><font color="red">请输入yyyyMMddhhmmss时间类型的数据(查询订单状态时输入)</font></td>
		</tr>
		
		<tr>
			<td align="right">对账文件清算时间:</td>
			<td><input type="text" name="settleDate" id="settleDate" value="" maxlength="8" ><font color="red">请输入yyyyMMddhhmmss时间类型的数据(查询订单状态时输入)</font></td>
		</tr>
		
		<tr>
			<td align="right">选择自定义渠道支付:</td>
			<td>
				<select name="payChannel" id="payChannel">
					<option value="">--选择支付渠道--</option>
					<option value="6002">网银支付</option>
					<option value="6003">手机支付</option>
					<option value="6005">银联在线支付</option>
				</select>
			</td>
		</tr>
		
		<tr bgcolor="#FFFFFF">
			<td align="right">交易类型:</td>
			<td><select id="transType" name="transType">
				<option value="01">(01)消费</option>
				<option value="35">(35)支付交易状态查询</option>
				<option value="1001">(1001)对账文件下载</option>
			</select></td>
		</tr>
		<tr>
			<td colspan="2" align="center">
				<input type="submit" value="提交支付"/>
			</td>
		</tr>
	</tbody>
</table>
<div>

</div>
</form>
</body></html>